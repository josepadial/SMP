CCS PCH C Compiler, Version 5.008, 5967               06-jun.-19 18:14

               Filename:   C:\Users\padul\Desktop\GitHub\SMP\Impacto\impacto.lst

               ROM used:   264 bytes (1%)
                           Largest free fragment is 30452
               RAM used:   5 (0%) at main() level
                           7 (0%) worst case
               Stack used: 2 locations
               Stack size: 31

*
0800:  GOTO   08E8
.................... #include "tarjeta.h"  
.................... #ifndef _TARJETA_ 
.................... #define _TARJETA_ 
....................  
.................... #include <18F4550.h> 
.................... //////// Standard Header file for the PIC18F4550 device //////////////// 
.................... #device PIC18F4550 
....................  
.................... #list 
....................  
....................  
.................... #fuses USBDIV, CPUDIV1, PLL5, HSPLL, NOFCMEN, NOIESO, VREGEN, BORV21, BROWNOUT, NOPUT, WDT32768, NOWDT 
.................... #fuses MCLR, NOLPT1OSC, NOPBADEN, CCP2C1, NODEBUG, NOXINST, NOICPRT, NOLVP, STVREN, NOPROTECT, NOCPD 
.................... #fuses NOCPB, NOWRT, NOWRTD, WRTB, NOWRTC, NOEBTR, NOEBTRB 
....................  
.................... /*********************************************************** 
....................       EVITAMOS LA ZONA DE MEMORIA ASIGNADA AL MONITOR 
.................... ***********************************************************/ 
....................  
.................... #define LOADER_END   0x7FF 
.................... #define LOADER_SIZE   0x6FF 
....................  
.................... #build(reset=LOADER_END+1, interrupt=LOADER_END+9) 
.................... #org 0, LOADER_END {} 
.................... //#org 0x82A, 0x7FFF 
....................  
....................  
.................... /*********************************************************** 
....................            FUNCIONES PARA MOVER LOS MOTORES 
.................... MX_H() : Mueve el motor en sentido horario 
.................... MX_A() : Mueve el motor en sentido anti-horario 
.................... MX_P() : Para el motor 
.................... ***********************************************************/ 
....................  
.................... void M1_A(){ 
....................    output_high(PIN_A1); 
*
0808:  BCF    F92.1
080A:  BSF    F89.1
....................    output_high(PIN_D7); 
080C:  BCF    F95.7
080E:  BSF    F8C.7
....................    output_low(PIN_D6); 
0810:  BCF    F95.6
0812:  BCF    F8C.6
0814:  GOTO   08FC (RETURN)
.................... } 
....................  
.................... void M1_H(){ 
....................    output_high(PIN_A1); 
....................    output_low(PIN_D7); 
....................    output_high(PIN_D6); 
.................... } 
....................  
.................... void M1_P(){ 
....................    output_high(PIN_A1); 
....................    output_low(PIN_D7); 
....................    output_low(PIN_D6); 
.................... } 
....................  
.................... void M2_A(){ 
....................    output_high(PIN_A0); 
0818:  BCF    F92.0
081A:  BSF    F89.0
....................    output_high(PIN_C2); 
081C:  BCF    F94.2
081E:  BSF    F8B.2
....................    output_low(PIN_D5); 
0820:  BCF    F95.5
0822:  BCF    F8C.5
0824:  GOTO   08FE (RETURN)
.................... } 
....................  
.................... void M2_H(){ 
....................    output_high(PIN_A0); 
....................    output_low(PIN_C2); 
....................    output_high(PIN_D5); 
.................... } 
....................  
.................... void M2_P(){ 
....................    output_high(PIN_A0); 
....................    output_low(PIN_C2); 
....................    output_low(PIN_D5); 
.................... } 
....................  
.................... void M3_A(){ 
....................    output_high(PIN_A2); 
*
088C:  BCF    F92.2
088E:  BSF    F89.2
....................    output_low(PIN_B2); 
0890:  BCF    F93.2
0892:  BCF    F8A.2
....................    output_high(PIN_E0); 
0894:  BCF    F96.0
0896:  BSF    F8D.0
0898:  GOTO   08CA (RETURN)
.................... } 
....................  
.................... void M3_H(){ 
....................    output_high(PIN_A2); 
*
0828:  BCF    F92.2
082A:  BSF    F89.2
....................    output_high(PIN_B2); 
082C:  BCF    F93.2
082E:  BSF    F8A.2
....................    output_low(PIN_E0); 
0830:  BCF    F96.0
0832:  BCF    F8D.0
0834:  GOTO   08AE (RETURN)
.................... } 
....................  
.................... void M3_P(){ 
....................    output_high(PIN_A2); 
*
0870:  BCF    F92.2
0872:  BSF    F89.2
....................    output_low(PIN_B2); 
0874:  BCF    F93.2
0876:  BCF    F8A.2
....................    output_low(PIN_E0); 
0878:  BCF    F96.0
087A:  BCF    F8D.0
087C:  RETURN 0
.................... } 
....................  
.................... void M4_A(){ 
....................    output_high(PIN_A3); 
*
089C:  BCF    F92.3
089E:  BSF    F89.3
....................    output_low(PIN_E2); 
08A0:  BCF    F96.2
08A2:  BCF    F8D.2
....................    output_high(PIN_E1); 
08A4:  BCF    F96.1
08A6:  BSF    F8D.1
08A8:  GOTO   08CC (RETURN)
.................... } 
....................  
.................... void M4_H(){ 
....................    output_high(PIN_A3); 
*
0838:  BCF    F92.3
083A:  BSF    F89.3
....................    output_high(PIN_E2); 
083C:  BCF    F96.2
083E:  BSF    F8D.2
....................    output_low(PIN_E1); 
0840:  BCF    F96.1
0842:  BCF    F8D.1
0844:  GOTO   08B0 (RETURN)
.................... } 
....................  
.................... void M4_P(){ 
....................    output_high(PIN_A3); 
*
087E:  BCF    F92.3
0880:  BSF    F89.3
....................    output_low(PIN_E2); 
0882:  BCF    F96.2
0884:  BCF    F8D.2
....................    output_low(PIN_E1); 
0886:  BCF    F96.1
0888:  BCF    F8D.1
088A:  RETURN 0
.................... } 
....................  
....................  
.................... /*********************************************************** 
....................             MACRO PARA LEER EL PULSADOR P2 
.................... ***********************************************************/ 
....................  
.................... #define P2   (!input(PIN_B4)) 
....................  
.................... /*********************************************************** 
....................               MACROS PARA MANEJAR EL LED 
.................... ***********************************************************/ 
....................  
.................... #define led_on()   output_high(PIN_A5) 
.................... #define led_off()   output_low(PIN_A5) 
....................  
.................... /*********************************************************** 
....................            DEFINICION DE LAS E/S DIRECTAS 
.................... ***********************************************************/ 
....................  
.................... #define ES0   PIN_A4 
.................... #define ES1   PIN_B3 
.................... #define ES2   PIN_B5 
.................... #define ES3   PIN_B6 
.................... #define ES4   PIN_B7 
.................... #define ES5   PIN_C7 
.................... #define ES6   PIN_C6 
.................... #define ES7   PIN_C1 
.................... #define ES8   PIN_C0 
....................  
.................... /*********************************************************** 
....................         MACROS PARA LEER LOS SENSORES FIJOS INX 
.................... ***********************************************************/ 
....................  
.................... #define IN1      input(PIN_D0) 
.................... #define IN2      input(PIN_D1) 
.................... #define IN3      input(PIN_D2) 
.................... #define IN4      input(PIN_D3) 
.................... #define IN5      input(PIN_D4) 
.................... //IN6 ES UNA E/S CONFIGURABLE 
.................... //#define IN6      input(ES0) 
.................... //#define IN6      input(ES1) 
.................... // ... O CUALQUIER OTRA E/S DIRECTA 
....................  
.................... /*********************************************************** 
....................             DIRECTIVA PARA EL USO DEL I2C 
.................... ***********************************************************/ 
.................... #use I2C(master, sda=PIN_B0, scl=PIN_B1) 
....................  
.................... #endif 
....................  
....................  
....................  
.................... #include "mismov.h"  
.................... #ifndef _MISMOV_ 
.................... #define _MISMOV_ 
....................  
.................... #include "tarjeta.h"  
.................... #ifndef _TARJETA_ 
.................... #define _TARJETA_ 
....................  
.................... #include <18F4550.h> 
....................  
.................... #fuses USBDIV, CPUDIV1, PLL5, HSPLL, NOFCMEN, NOIESO, VREGEN, BORV21, BROWNOUT, NOPUT, WDT32768, NOWDT 
.................... #fuses MCLR, NOLPT1OSC, NOPBADEN, CCP2C1, NODEBUG, NOXINST, NOICPRT, NOLVP, STVREN, NOPROTECT, NOCPD 
.................... #fuses NOCPB, NOWRT, NOWRTD, WRTB, NOWRTC, NOEBTR, NOEBTRB 
....................  
.................... /*********************************************************** 
....................       EVITAMOS LA ZONA DE MEMORIA ASIGNADA AL MONITOR 
.................... ***********************************************************/ 
....................  
.................... #define LOADER_END   0x7FF 
.................... #define LOADER_SIZE   0x6FF 
....................  
.................... #build(reset=LOADER_END+1, interrupt=LOADER_END+9) 
.................... #org 0, LOADER_END {} 
.................... //#org 0x82A, 0x7FFF 
....................  
....................  
.................... /*********************************************************** 
....................            FUNCIONES PARA MOVER LOS MOTORES 
.................... MX_H() : Mueve el motor en sentido horario 
.................... MX_A() : Mueve el motor en sentido anti-horario 
.................... MX_P() : Para el motor 
.................... ***********************************************************/ 
....................  
.................... void M1_A(){ 
....................    output_high(PIN_A1); 
....................    output_high(PIN_D7); 
....................    output_low(PIN_D6); 
.................... } 
....................  
.................... void M1_H(){ 
....................    output_high(PIN_A1); 
....................    output_low(PIN_D7); 
....................    output_high(PIN_D6); 
.................... } 
....................  
.................... void M1_P(){ 
....................    output_high(PIN_A1); 
....................    output_low(PIN_D7); 
....................    output_low(PIN_D6); 
.................... } 
....................  
.................... void M2_A(){ 
....................    output_high(PIN_A0); 
....................    output_high(PIN_C2); 
....................    output_low(PIN_D5); 
.................... } 
....................  
.................... void M2_H(){ 
....................    output_high(PIN_A0); 
....................    output_low(PIN_C2); 
....................    output_high(PIN_D5); 
.................... } 
....................  
.................... void M2_P(){ 
....................    output_high(PIN_A0); 
....................    output_low(PIN_C2); 
....................    output_low(PIN_D5); 
.................... } 
....................  
.................... void M3_A(){ 
....................    output_high(PIN_A2); 
....................    output_low(PIN_B2); 
....................    output_high(PIN_E0); 
.................... } 
....................  
.................... void M3_H(){ 
....................    output_high(PIN_A2); 
....................    output_high(PIN_B2); 
....................    output_low(PIN_E0); 
.................... } 
....................  
.................... void M3_P(){ 
....................    output_high(PIN_A2); 
....................    output_low(PIN_B2); 
....................    output_low(PIN_E0); 
.................... } 
....................  
.................... void M4_A(){ 
....................    output_high(PIN_A3); 
....................    output_low(PIN_E2); 
....................    output_high(PIN_E1); 
.................... } 
....................  
.................... void M4_H(){ 
....................    output_high(PIN_A3); 
....................    output_high(PIN_E2); 
....................    output_low(PIN_E1); 
.................... } 
....................  
.................... void M4_P(){ 
....................    output_high(PIN_A3); 
....................    output_low(PIN_E2); 
....................    output_low(PIN_E1); 
.................... } 
....................  
....................  
.................... /*********************************************************** 
....................             MACRO PARA LEER EL PULSADOR P2 
.................... ***********************************************************/ 
....................  
.................... #define P2   (!input(PIN_B4)) 
....................  
.................... /*********************************************************** 
....................               MACROS PARA MANEJAR EL LED 
.................... ***********************************************************/ 
....................  
.................... #define led_on()   output_high(PIN_A5) 
.................... #define led_off()   output_low(PIN_A5) 
....................  
.................... /*********************************************************** 
....................            DEFINICION DE LAS E/S DIRECTAS 
.................... ***********************************************************/ 
....................  
.................... #define ES0   PIN_A4 
.................... #define ES1   PIN_B3 
.................... #define ES2   PIN_B5 
.................... #define ES3   PIN_B6 
.................... #define ES4   PIN_B7 
.................... #define ES5   PIN_C7 
.................... #define ES6   PIN_C6 
.................... #define ES7   PIN_C1 
.................... #define ES8   PIN_C0 
....................  
.................... /*********************************************************** 
....................         MACROS PARA LEER LOS SENSORES FIJOS INX 
.................... ***********************************************************/ 
....................  
.................... #define IN1      input(PIN_D0) 
.................... #define IN2      input(PIN_D1) 
.................... #define IN3      input(PIN_D2) 
.................... #define IN4      input(PIN_D3) 
.................... #define IN5      input(PIN_D4) 
.................... //IN6 ES UNA E/S CONFIGURABLE 
.................... //#define IN6      input(ES0) 
.................... //#define IN6      input(ES1) 
.................... // ... O CUALQUIER OTRA E/S DIRECTA 
....................  
.................... /*********************************************************** 
....................             DIRECTIVA PARA EL USO DEL I2C 
.................... ***********************************************************/ 
.................... #use I2C(master, sda=PIN_B0, scl=PIN_B1) 
....................  
.................... #endif 
....................  
....................  
....................  
.................... #use delay (clock=48000000) 
*
0848:  CLRF   FEA
084A:  MOVLW  07
084C:  MOVWF  FE9
084E:  MOVF   FEF,W
0850:  BZ    086E
0852:  MOVLW  0F
0854:  MOVWF  01
0856:  CLRF   00
0858:  DECFSZ 00,F
085A:  BRA    0858
085C:  DECFSZ 01,F
085E:  BRA    0856
0860:  MOVLW  8F
0862:  MOVWF  00
0864:  DECFSZ 00,F
0866:  BRA    0864
0868:  NOP   
086A:  DECFSZ FEF,F
086C:  BRA    0852
086E:  RETURN 0
....................  
.................... void IMPACTO(){ 
....................    M3_H(); 
*
08AC:  BRA    0828
....................    M4_H(); 
08AE:  BRA    0838
....................    delay_ms(250); 
08B0:  MOVLW  FA
08B2:  MOVWF  07
08B4:  RCALL  0848
....................    M3_P(); 
08B6:  RCALL  0870
....................    M4_P(); 
08B8:  RCALL  087E
....................    delay_ms(700); 
08BA:  MOVLW  04
08BC:  MOVWF  06
08BE:  MOVLW  AF
08C0:  MOVWF  07
08C2:  RCALL  0848
08C4:  DECFSZ 06,F
08C6:  BRA    08BE
....................    M3_A(); 
08C8:  BRA    088C
....................    M4_A(); 
08CA:  BRA    089C
....................    delay_ms(250); 
08CC:  MOVLW  FA
08CE:  MOVWF  07
08D0:  RCALL  0848
....................    M3_P(); 
08D2:  RCALL  0870
....................    M4_P(); 
08D4:  RCALL  087E
....................    delay_ms(500); 
08D6:  MOVLW  02
08D8:  MOVWF  06
08DA:  MOVLW  FA
08DC:  MOVWF  07
08DE:  RCALL  0848
08E0:  DECFSZ 06,F
08E2:  BRA    08DA
08E4:  GOTO   0906 (RETURN)
.................... } 
....................  
.................... #endif 
....................  
.................... #use delay (clock=48000000)  
....................  
....................  
.................... void inicializarTimer0PWM(){  
....................    setup_timer_0(RTCC_INTERNAL|RTCC_DIV_2|RTCC_8_BIT);  
....................    enable_interrupts(INT_TIMER0);  
....................    enable_interrupts(GLOBAL);  
.................... }   
....................   
.................... void main(){  
08E8:  CLRF   FF8
08EA:  BCF    FD0.7
08EC:  MOVF   FC1,W
08EE:  ANDLW  C0
08F0:  IORLW  0F
08F2:  MOVWF  FC1
08F4:  MOVLW  07
08F6:  MOVWF  FB4
08F8:  CLRF   05
....................    //inicializarTimer0PWM();  
....................    int cont = 0; 
....................    M1_A(); 
08FA:  BRA    0808
....................    M2_A(); 
08FC:  BRA    0818
....................    while(1){ 
....................       if(IN2 /*&& cont<2*/){ 
08FE:  BSF    F95.1
0900:  BTFSS  F83.1
0902:  BRA    0908
....................          IMPACTO(); 
0904:  BRA    08AC
....................          cont++; 
0906:  INCF   05,F
....................       } 
0908:  BRA    08FE
....................       /*else if(IN2 && cont>2){ 
....................          M1_A(); 
....................          M2_A(); 
....................          cont=0; 
....................          delay_ms(500); 
....................       }*/ 
....................           
....................    }   
.................... } 
....................  
090A:  SLEEP 

Configuration Fuses:
   Word  1: 0E24   PLL5 CPUDIV1 USBDIV HSPLL NOFCMEN NOIESO
   Word  2: 1E3F   NOPUT BROWNOUT BORV21 VREGEN NOWDT WDT32768
   Word  3: 8100   CCP2C1 NOPBADEN NOLPT1OSC MCLR
   Word  4: 0081   STVREN NOLVP ICSP1 NOXINST NODEBUG
   Word  5: C00F   NOPROTECT NOCPB NOCPD
   Word  6: A00F   NOWRT NOWRTC WRTB NOWRTD
   Word  7: 400F   NOEBTR NOEBTRB
