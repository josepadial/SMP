CCS PCH C Compiler, Version 5.008, 5967               18-jun.-19 21:04

               Filename:   C:\Users\padul\Desktop\GitHub\SMP\Controlar giro\controlar_giro.lst

               ROM used:   456 bytes (1%)
                           Largest free fragment is 30260
               RAM used:   5 (0%) at main() level
                           8 (0%) worst case
               Stack used: 3 locations
               Stack size: 31

*
0800:  GOTO   0936
.................... #include "tarjeta.h"   
.................... #ifndef _TARJETA_ 
.................... #define _TARJETA_ 
....................  
.................... #include <18F4550.h> 
.................... //////// Standard Header file for the PIC18F4550 device //////////////// 
.................... #device PIC18F4550 
....................  
.................... #list 
....................  
....................  
.................... #fuses USBDIV, CPUDIV1, PLL5, HSPLL, NOFCMEN, NOIESO, VREGEN, BORV21, BROWNOUT, NOPUT, WDT32768, NOWDT 
.................... #fuses MCLR, NOLPT1OSC, NOPBADEN, CCP2C1, NODEBUG, NOXINST, NOICPRT, NOLVP, STVREN, NOPROTECT, NOCPD 
.................... #fuses NOCPB, NOWRT, NOWRTD, WRTB, NOWRTC, NOEBTR, NOEBTRB 
....................  
.................... /*********************************************************** 
....................       EVITAMOS LA ZONA DE MEMORIA ASIGNADA AL MONITOR 
.................... ***********************************************************/ 
....................  
.................... #define LOADER_END   0x7FF 
.................... #define LOADER_SIZE   0x6FF 
....................  
.................... #build(reset=LOADER_END+1, interrupt=LOADER_END+9) 
.................... #org 0, LOADER_END {} 
.................... //#org 0x82A, 0x7FFF 
....................  
....................  
.................... /*********************************************************** 
....................            FUNCIONES PARA MOVER LOS MOTORES 
.................... MX_H() : Mueve el motor en sentido horario 
.................... MX_A() : Mueve el motor en sentido anti-horario 
.................... MX_P() : Para el motor 
.................... ***********************************************************/ 
....................  
.................... void M1_A(){ 
....................    output_high(PIN_A1); 
*
08DA:  BCF    F92.1
08DC:  BSF    F89.1
....................    output_high(PIN_D7); 
08DE:  BCF    F95.7
08E0:  BSF    F8C.7
....................    output_low(PIN_D6); 
08E2:  BCF    F95.6
08E4:  BCF    F8C.6
08E6:  RETURN 0
.................... } 
....................  
.................... void M1_H(){ 
....................    output_high(PIN_A1); 
*
0856:  BCF    F92.1
0858:  BSF    F89.1
....................    output_low(PIN_D7); 
085A:  BCF    F95.7
085C:  BCF    F8C.7
....................    output_high(PIN_D6); 
085E:  BCF    F95.6
0860:  BSF    F8C.6
0862:  RETURN 0
.................... } 
....................  
.................... void M1_P(){ 
....................    output_high(PIN_A1); 
*
0830:  BCF    F92.1
0832:  BSF    F89.1
....................    output_low(PIN_D7); 
0834:  BCF    F95.7
0836:  BCF    F8C.7
....................    output_low(PIN_D6); 
0838:  BCF    F95.6
083A:  BCF    F8C.6
083C:  GOTO   0852 (RETURN)
.................... } 
....................  
.................... void M2_A(){ 
....................    output_high(PIN_A0); 
*
08E8:  BCF    F92.0
08EA:  BSF    F89.0
....................    output_high(PIN_C2); 
08EC:  BCF    F94.2
08EE:  BSF    F8B.2
....................    output_low(PIN_D5); 
08F0:  BCF    F95.5
08F2:  BCF    F8C.5
08F4:  RETURN 0
.................... } 
....................  
.................... void M2_H(){ 
....................    output_high(PIN_A0); 
*
0864:  BCF    F92.0
0866:  BSF    F89.0
....................    output_low(PIN_C2); 
0868:  BCF    F94.2
086A:  BCF    F8B.2
....................    output_high(PIN_D5); 
086C:  BCF    F95.5
086E:  BSF    F8C.5
0870:  RETURN 0
.................... } 
....................  
.................... void M2_P(){ 
....................    output_high(PIN_A0); 
*
0840:  BCF    F92.0
0842:  BSF    F89.0
....................    output_low(PIN_C2); 
0844:  BCF    F94.2
0846:  BCF    F8B.2
....................    output_low(PIN_D5); 
0848:  BCF    F95.5
084A:  BCF    F8C.5
084C:  GOTO   0854 (RETURN)
.................... } 
....................  
.................... void M3_A(){ 
....................    output_high(PIN_A2); 
....................    output_low(PIN_B2); 
....................    output_high(PIN_E0); 
.................... } 
....................  
.................... void M3_H(){ 
....................    output_high(PIN_A2); 
....................    output_high(PIN_B2); 
....................    output_low(PIN_E0); 
.................... } 
....................  
.................... void M3_P(){ 
....................    output_high(PIN_A2); 
....................    output_low(PIN_B2); 
....................    output_low(PIN_E0); 
.................... } 
....................  
.................... void M4_A(){ 
....................    output_high(PIN_A3); 
....................    output_low(PIN_E2); 
....................    output_high(PIN_E1); 
.................... } 
....................  
.................... void M4_H(){ 
....................    output_high(PIN_A3); 
....................    output_high(PIN_E2); 
....................    output_low(PIN_E1); 
.................... } 
....................  
.................... void M4_P(){ 
....................    output_high(PIN_A3); 
....................    output_low(PIN_E2); 
....................    output_low(PIN_E1); 
.................... } 
....................  
....................  
.................... /*********************************************************** 
....................             MACRO PARA LEER EL PULSADOR P2 
.................... ***********************************************************/ 
....................  
.................... #define P2   (!input(PIN_B4)) 
....................  
.................... /*********************************************************** 
....................               MACROS PARA MANEJAR EL LED 
.................... ***********************************************************/ 
....................  
.................... #define led_on()   output_high(PIN_A5) 
.................... #define led_off()   output_low(PIN_A5) 
....................  
.................... /*********************************************************** 
....................            DEFINICION DE LAS E/S DIRECTAS 
.................... ***********************************************************/ 
....................  
.................... #define ES0   PIN_A4 
.................... #define ES1   PIN_B3 
.................... #define ES2   PIN_B5 
.................... #define ES3   PIN_B6 
.................... #define ES4   PIN_B7 
.................... #define ES5   PIN_C7 
.................... #define ES6   PIN_C6 
.................... #define ES7   PIN_C1 
.................... #define ES8   PIN_C0 
....................  
.................... /*********************************************************** 
....................         MACROS PARA LEER LOS SENSORES FIJOS INX 
.................... ***********************************************************/ 
....................  
.................... #define IN1      input(PIN_D0) 
.................... #define IN2      input(PIN_D1) 
.................... #define IN3      input(PIN_D2) 
.................... #define IN4      input(PIN_D3) 
.................... #define IN5      input(PIN_D4) 
.................... //IN6 ES UNA E/S CONFIGURABLE 
.................... //#define IN6      input(ES0) 
.................... //#define IN6      input(ES1) 
.................... // ... O CUALQUIER OTRA E/S DIRECTA 
....................  
.................... /*********************************************************** 
....................             DIRECTIVA PARA EL USO DEL I2C 
.................... ***********************************************************/ 
.................... #use I2C(master, sda=PIN_B0, scl=PIN_B1) 
....................  
.................... #endif 
....................  
....................  
....................  
.................... #include "mismov.h"   
.................... #ifndef _MISMOV_ 
.................... #define _MISMOV_ 
....................  
.................... #include "tarjeta.h" 
.................... #ifndef _TARJETA_ 
.................... #define _TARJETA_ 
....................  
.................... #include <18F4550.h> 
....................  
.................... #fuses USBDIV, CPUDIV1, PLL5, HSPLL, NOFCMEN, NOIESO, VREGEN, BORV21, BROWNOUT, NOPUT, WDT32768, NOWDT 
.................... #fuses MCLR, NOLPT1OSC, NOPBADEN, CCP2C1, NODEBUG, NOXINST, NOICPRT, NOLVP, STVREN, NOPROTECT, NOCPD 
.................... #fuses NOCPB, NOWRT, NOWRTD, WRTB, NOWRTC, NOEBTR, NOEBTRB 
....................  
.................... /*********************************************************** 
....................       EVITAMOS LA ZONA DE MEMORIA ASIGNADA AL MONITOR 
.................... ***********************************************************/ 
....................  
.................... #define LOADER_END   0x7FF 
.................... #define LOADER_SIZE   0x6FF 
....................  
.................... #build(reset=LOADER_END+1, interrupt=LOADER_END+9) 
.................... #org 0, LOADER_END {} 
.................... //#org 0x82A, 0x7FFF 
....................  
....................  
.................... /*********************************************************** 
....................            FUNCIONES PARA MOVER LOS MOTORES 
.................... MX_H() : Mueve el motor en sentido horario 
.................... MX_A() : Mueve el motor en sentido anti-horario 
.................... MX_P() : Para el motor 
.................... ***********************************************************/ 
....................  
.................... void M1_A(){ 
....................    output_high(PIN_A1); 
....................    output_high(PIN_D7); 
....................    output_low(PIN_D6); 
.................... } 
....................  
.................... void M1_H(){ 
....................    output_high(PIN_A1); 
....................    output_low(PIN_D7); 
....................    output_high(PIN_D6); 
.................... } 
....................  
.................... void M1_P(){ 
....................    output_high(PIN_A1); 
....................    output_low(PIN_D7); 
....................    output_low(PIN_D6); 
.................... } 
....................  
.................... void M2_A(){ 
....................    output_high(PIN_A0); 
....................    output_high(PIN_C2); 
....................    output_low(PIN_D5); 
.................... } 
....................  
.................... void M2_H(){ 
....................    output_high(PIN_A0); 
....................    output_low(PIN_C2); 
....................    output_high(PIN_D5); 
.................... } 
....................  
.................... void M2_P(){ 
....................    output_high(PIN_A0); 
....................    output_low(PIN_C2); 
....................    output_low(PIN_D5); 
.................... } 
....................  
.................... void M3_A(){ 
....................    output_high(PIN_A2); 
....................    output_low(PIN_B2); 
....................    output_high(PIN_E0); 
.................... } 
....................  
.................... void M3_H(){ 
....................    output_high(PIN_A2); 
....................    output_high(PIN_B2); 
....................    output_low(PIN_E0); 
.................... } 
....................  
.................... void M3_P(){ 
....................    output_high(PIN_A2); 
....................    output_low(PIN_B2); 
....................    output_low(PIN_E0); 
.................... } 
....................  
.................... void M4_A(){ 
....................    output_high(PIN_A3); 
....................    output_low(PIN_E2); 
....................    output_high(PIN_E1); 
.................... } 
....................  
.................... void M4_H(){ 
....................    output_high(PIN_A3); 
....................    output_high(PIN_E2); 
....................    output_low(PIN_E1); 
.................... } 
....................  
.................... void M4_P(){ 
....................    output_high(PIN_A3); 
....................    output_low(PIN_E2); 
....................    output_low(PIN_E1); 
.................... } 
....................  
....................  
.................... /*********************************************************** 
....................             MACRO PARA LEER EL PULSADOR P2 
.................... ***********************************************************/ 
....................  
.................... #define P2   (!input(PIN_B4)) 
....................  
.................... /*********************************************************** 
....................               MACROS PARA MANEJAR EL LED 
.................... ***********************************************************/ 
....................  
.................... #define led_on()   output_high(PIN_A5) 
.................... #define led_off()   output_low(PIN_A5) 
....................  
.................... /*********************************************************** 
....................            DEFINICION DE LAS E/S DIRECTAS 
.................... ***********************************************************/ 
....................  
.................... #define ES0   PIN_A4 
.................... #define ES1   PIN_B3 
.................... #define ES2   PIN_B5 
.................... #define ES3   PIN_B6 
.................... #define ES4   PIN_B7 
.................... #define ES5   PIN_C7 
.................... #define ES6   PIN_C6 
.................... #define ES7   PIN_C1 
.................... #define ES8   PIN_C0 
....................  
.................... /*********************************************************** 
....................         MACROS PARA LEER LOS SENSORES FIJOS INX 
.................... ***********************************************************/ 
....................  
.................... #define IN1      input(PIN_D0) 
.................... #define IN2      input(PIN_D1) 
.................... #define IN3      input(PIN_D2) 
.................... #define IN4      input(PIN_D3) 
.................... #define IN5      input(PIN_D4) 
.................... //IN6 ES UNA E/S CONFIGURABLE 
.................... //#define IN6      input(ES0) 
.................... //#define IN6      input(ES1) 
.................... // ... O CUALQUIER OTRA E/S DIRECTA 
....................  
.................... /*********************************************************** 
....................             DIRECTIVA PARA EL USO DEL I2C 
.................... ***********************************************************/ 
.................... #use I2C(master, sda=PIN_B0, scl=PIN_B1) 
....................  
.................... #endif 
....................  
....................  
....................  
.................... //#include "srf02.h" 
.................... #use delay (clock=48000000) 
*
087A:  CLRF   FEA
087C:  MOVLW  08
087E:  MOVWF  FE9
0880:  MOVF   FEF,W
0882:  BZ    08A0
0884:  MOVLW  0F
0886:  MOVWF  01
0888:  CLRF   00
088A:  DECFSZ 00,F
088C:  BRA    088A
088E:  DECFSZ 01,F
0890:  BRA    0888
0892:  MOVLW  8F
0894:  MOVWF  00
0896:  DECFSZ 00,F
0898:  BRA    0896
089A:  NOP   
089C:  DECFSZ FEF,F
089E:  BRA    0884
08A0:  RETURN 0
....................  
.................... void DELANTE(){ 
....................    M1_H(); 
*
0872:  RCALL  0856
....................    M2_H(); 
0874:  RCALL  0864
0876:  GOTO   0966 (RETURN)
.................... } 
....................  
.................... void ATRAS(){ 
....................    M1_A(); 
*
092E:  RCALL  08DA
....................    M2_A(); 
0930:  RCALL  08E8
0932:  GOTO   09BA (RETURN)
.................... } 
....................  
.................... void PARAR(){ 
....................    M1_P(); 
*
0850:  BRA    0830
....................    M2_P(); 
0852:  BRA    0840
0854:  RETURN 0
.................... } 
....................  
.................... void PARAR_I(){ 
....................    M4_P(); 
.................... } 
....................  
.................... void DISPARAR(){ 
....................    M4_H(); 
.................... } 
....................  
.................... void RECOGER(){ 
....................    M4_A(); 
.................... } 
....................  
.................... void IMPACTO(){ 
....................    DISPARAR(); 
....................    delay_ms(250); 
....................    PARAR_I(); 
....................    delay_ms(700); 
....................    RECOGER(); 
....................    delay_ms(250); 
....................    PARAR_I(); 
....................    delay_ms(500); 
.................... } 
....................  
.................... void DERECHA(long int t){ 
....................    PARAR(); 
*
08A2:  RCALL  0850
....................    delay_ms(400); 
08A4:  MOVLW  02
08A6:  MOVWF  07
08A8:  MOVLW  C8
08AA:  MOVWF  08
08AC:  RCALL  087A
08AE:  DECFSZ 07,F
08B0:  BRA    08A8
....................    M1_H(); 
08B2:  RCALL  0856
....................    M2_H(); 
08B4:  RCALL  0864
....................    delay_ms(t); 
08B6:  MOVFF  06,07
08BA:  INCF   07,F
08BC:  DECF   07,F
08BE:  BTFSC  FD8.2
08C0:  BRA    08C8
08C2:  SETF   08
08C4:  RCALL  087A
08C6:  BRA    08BC
08C8:  MOVFF  05,08
08CC:  RCALL  087A
....................    PARAR(); 
08CE:  RCALL  0850
....................    delay_ms(250); 
08D0:  MOVLW  FA
08D2:  MOVWF  08
08D4:  RCALL  087A
08D6:  GOTO   098E (RETURN)
.................... } 
....................  
.................... void IZQUIERDA(long int t){ 
....................    PARAR(); 
*
08F6:  RCALL  0850
....................    delay_ms(400); 
08F8:  MOVLW  02
08FA:  MOVWF  07
08FC:  MOVLW  C8
08FE:  MOVWF  08
0900:  RCALL  087A
0902:  DECFSZ 07,F
0904:  BRA    08FC
....................    M1_A(); 
0906:  RCALL  08DA
....................    M2_A(); 
0908:  RCALL  08E8
....................    delay_ms(t); 
090A:  MOVFF  06,07
090E:  INCF   07,F
0910:  DECF   07,F
0912:  BTFSC  FD8.2
0914:  BRA    091C
0916:  SETF   08
0918:  RCALL  087A
091A:  BRA    0910
091C:  MOVFF  05,08
0920:  RCALL  087A
....................    PARAR(); 
0922:  RCALL  0850
....................    delay_ms(250); 
0924:  MOVLW  FA
0926:  MOVWF  08
0928:  RCALL  087A
092A:  GOTO   09A8 (RETURN)
.................... } 
....................  
.................... /*int ULTRA_SONIDOS_FRENTE(int dist){ 
....................    delay_ms(1); 
....................    if(srf_measure_cm_frente() < dist)  
....................       return 1; 
....................    else 
....................       return 0; 
.................... } 
....................  
.................... int ULTRA_SONIDOS_DERE(int dist){ 
....................    delay_ms(1); 
....................    if(srf_measure_cm_dere() < dist)  
....................       return 1; 
....................    else 
....................       return 0; 
.................... } 
....................  
....................  
.................... int ULTRA_SONIDOS_IZQUI(int dist){ 
....................    delay_ms(1); 
....................    if(srf_measure_cm_izqui() < dist)  
....................       return 1; 
....................    else 
....................       return 0; 
.................... }*/ 
....................  
....................  
.................... #endif 
....................  
.................... #use delay (clock=48000000)  
*
0808:  CLRF   FEA
080A:  MOVLW  06
080C:  MOVWF  FE9
080E:  MOVF   FEF,W
0810:  BZ    082E
0812:  MOVLW  0F
0814:  MOVWF  01
0816:  CLRF   00
0818:  DECFSZ 00,F
081A:  BRA    0818
081C:  DECFSZ 01,F
081E:  BRA    0816
0820:  MOVLW  8F
0822:  MOVWF  00
0824:  DECFSZ 00,F
0826:  BRA    0824
0828:  NOP   
082A:  DECFSZ FEF,F
082C:  BRA    0812
082E:  RETURN 0
....................  
....................  
.................... void inicializarTimer0PWM(){  
....................    setup_timer_0(RTCC_INTERNAL|RTCC_DIV_2|RTCC_8_BIT);  
....................    enable_interrupts(INT_TIMER0);  
....................    enable_interrupts(GLOBAL);  
.................... }   
....................   
.................... void main(){  
*
0936:  CLRF   FF8
0938:  BCF    FD0.7
093A:  MOVF   FC1,W
093C:  ANDLW  C0
093E:  IORLW  0F
0940:  MOVWF  FC1
0942:  MOVLW  07
0944:  MOVWF  FB4
....................    //inicializarTimer0PWM();  
....................    delay_ms(3000); 
0946:  MOVLW  0C
0948:  MOVWF  05
094A:  MOVLW  FA
094C:  MOVWF  06
094E:  RCALL  0808
0950:  DECFSZ 05,F
0952:  BRA    094A
....................    while(1){ 
....................       PARAR(); 
0954:  RCALL  0850
....................       delay_ms(500); 
0956:  MOVLW  02
0958:  MOVWF  05
095A:  MOVLW  FA
095C:  MOVWF  06
095E:  RCALL  0808
0960:  DECFSZ 05,F
0962:  BRA    095A
....................       DELANTE(); 
0964:  BRA    0872
....................       delay_ms(1000); 
0966:  MOVLW  04
0968:  MOVWF  05
096A:  MOVLW  FA
096C:  MOVWF  06
096E:  RCALL  0808
0970:  DECFSZ 05,F
0972:  BRA    096A
....................       PARAR(); 
0974:  RCALL  0850
....................       delay_ms(500); 
0976:  MOVLW  02
0978:  MOVWF  05
097A:  MOVLW  FA
097C:  MOVWF  06
097E:  RCALL  0808
0980:  DECFSZ 05,F
0982:  BRA    097A
....................       DERECHA(2500); 
0984:  MOVLW  09
0986:  MOVWF  06
0988:  MOVLW  C4
098A:  MOVWF  05
098C:  BRA    08A2
....................       PARAR(); 
098E:  RCALL  0850
....................       delay_ms(500); 
0990:  MOVLW  02
0992:  MOVWF  05
0994:  MOVLW  FA
0996:  MOVWF  06
0998:  RCALL  0808
099A:  DECFSZ 05,F
099C:  BRA    0994
....................       IZQUIERDA(2500); 
099E:  MOVLW  09
09A0:  MOVWF  06
09A2:  MOVLW  C4
09A4:  MOVWF  05
09A6:  BRA    08F6
....................       PARAR(); 
09A8:  RCALL  0850
....................       delay_ms(500); 
09AA:  MOVLW  02
09AC:  MOVWF  05
09AE:  MOVLW  FA
09B0:  MOVWF  06
09B2:  RCALL  0808
09B4:  DECFSZ 05,F
09B6:  BRA    09AE
....................       ATRAS(); 
09B8:  BRA    092E
....................       delay_ms(1000);  
09BA:  MOVLW  04
09BC:  MOVWF  05
09BE:  MOVLW  FA
09C0:  MOVWF  06
09C2:  RCALL  0808
09C4:  DECFSZ 05,F
09C6:  BRA    09BE
09C8:  BRA    0954
....................    }   
.................... } 
....................  
09CA:  SLEEP 

Configuration Fuses:
   Word  1: 0E24   PLL5 CPUDIV1 USBDIV HSPLL NOFCMEN NOIESO
   Word  2: 1E3F   NOPUT BROWNOUT BORV21 VREGEN NOWDT WDT32768
   Word  3: 8100   CCP2C1 NOPBADEN NOLPT1OSC MCLR
   Word  4: 0081   STVREN NOLVP ICSP1 NOXINST NODEBUG
   Word  5: C00F   NOPROTECT NOCPB NOCPD
   Word  6: A00F   NOWRT NOWRTC WRTB NOWRTD
   Word  7: 400F   NOEBTR NOEBTRB
